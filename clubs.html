<!DOCTYPE html>
<html>
    <head>
        <title>LuxFoot | Clubs</title>
        <link href="styles.css" rel="stylesheet" />
    </head>
    <body>
        <h1>Luxembourgish Football: Clubs</h1>
        <a href="index.html">Home</a>
        <ul id="clubslist">

        </ul>
        <script>
            levelNames = {
                "1": "National Division",
                "2": "Division of Honour",
                "3": "1. Division",
                "4": "2. Division",
                "5": "3. Division",
                "defunct": "Defunct"
            }
            fetch("data/teams.json")
                .then(response => response.json())
                .then(data => {
                    levels = {
                        "1": [],
                        "2": [],
                        "3": [],
                        "4": [],
                        "5": [],
                        "defunct": []
                    }
                    Object.entries(data).forEach(c=>{
                        club = c[1];
                        if ( ! club.level ) {
                            club.level = "defunct";
                        }
                        thisClub = club;
                        thisClub.code = c[0];
                        levels[club.level].push(thisClub);
                    });
                    ul = document.getElementById("clubslist");
                    ["1","2","3","4","5","defunct"].forEach(l=>{
                        levelLi = document.createElement("LI");
                        levelLi.textContent = levelNames[l];
                        liul = document.createElement("UL");
                        levels[l].forEach(c=>{
                            li = document.createElement("LI");
                            link = document.createElement("A");
                            link.href = "club.html?y="+c.name;
                            link.textContent = c.code;
                            li.append(link);
                            liul.append(li);
                        });
                        ul.append(levelLi);
                    });
                });
        </script>
    </body>
</html>