<!DOCTYPE html>
<html>
    <head>
        <title>LuxFoot | Clubs</title>
        <link href="styles.css" rel="stylesheet" />
    </head>
    <body>
        <h1>Luxembourgish Football: Clubs</h1>
        <a href="index.html">Home</a> | <a href="clubs.html">All Clubs</a>
        <script>
            params=[];
            window.location.search.replace("?","").split("&").forEach(param=>{parts=param.split("=");params[parts[0]]=parts[1];});
            team = params.team;
            fetch("clubs/"+team.toLowerCase()+".json")
                .then(response => {
                    if ( ! response.ok ) {
                        errorP = document.createElement("P");
                        errorP.classList.add("error");
                        errorP.textContent = "Club not found";
                        document.body.append(errorP);
                        return {"invalid":true};
                    }
                    return response.json()
                })
                .then(data => {
                    if ( data.invalid ) {
                        return;
                    }

                    handleData(data);
                })
            
            function handleData(data) {
                document.getElementsByTagName("title")[0].textContent += " | " + data.name;
                document.getElementsByTagName("h1")[0].textContent += " : " + data.name;
                console.log(data);
            }
        </script>
    </body>
</html>